name: notify

on:
    discussion_comment:
      types: [created, edited, deleted]

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v2
              with:
                  submodules: true
                  fetch-depth: 0
            - name: Print discussion comment details
              run: |
                echo "Event Action: ${{ github.event.action }}"
                echo "Discussion ID: ${{ github.event.discussion.id }}"
                echo "Discussion Title: ${{ github.event.discussion.title }}"
                echo "Comment ID: ${{ github.event.comment.id }}"
                echo "Comment Author: ${{ github.event.comment.user.login }}"
                echo "Comment Body: ${{ github.event.comment.body }}"
            - name: Debug event payload
              run: |
                echo "Event Payload: ${{ toJson(github.event) }}"
            
            - name: Send tg message
              run: curl -X POST "https://api.telegram.org/bot${{ secrets.TG_BOT_TOKEN }}/sendMessage" -d "chat_id=${{ secrets.TG_CHAT_ID }}&text=有新评论"
