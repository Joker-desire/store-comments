name: notify

on:
    discussion_comment:
      types: [created, edited, deleted]

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v2
              with:
                  submodules: true
                  fetch-depth: 0
            - name: Print discussion comment details
              run: |
                # Discussion ID: ${{ github.event.discussion.id }}
                # Discussion Title: ${{ github.event.discussion.title }}
                # Comment ID: ${{ github.event.comment.id }}
                COMMENT_DETAIL="""ğŸ¤–ã€Blog Commentsã€‘
                ğŸ¤”Action: ${{ github.event.action }}
                ğŸ™‹ğŸ»â€â™‚ï¸Comment Author: ${{ github.event.comment.user.login }}
                âœğŸ»Comment Body: ${{ github.event.comment.body }}
                ğŸ‘‰ğŸ»[åŸæ–‡](https://joker-desire.github.io/${{ github.event.discussion.title }})ğŸ‘ˆğŸ»"""
                curl -X POST "https://api.telegram.org/bot${{ secrets.TG_BOT_TOKEN }}/sendMessage" -d "chat_id=${{ secrets.TG_CHAT_ID }}&text=$COMMENT_DETAIL&parse_mode="Markdown"" 
